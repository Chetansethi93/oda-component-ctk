{"info":{"_postman_id":"4582573f-c548-4c3c-bf78-288716a35de3","name":"CTK-Party_Role-4.0.0","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"N1","item":[{"name":"/PartyRole","event":[{"listen":"test","script":{"exec":["pm.test(\"Status code is 200\", function () {","    pm.response.to.have.status(200);","});","  ","  ","  ","var jsonData = pm.response.json();","  ","if (Array.isArray(jsonData) && (jsonData.length > 0)) {","    jsonData.forEach(function (instance, index) {","      ","        var requiredAttributes = ['name','href', 'id'];","      ","        pm.test('Instance has all mandatory attributes', function () { pm.expect(Object.keys(instance)).to.include.members(requiredAttributes) });","      ","      ","      ","        pm.test('Response has name attribute', function() { pm.expect(instance[\"name\"]).to.be.a('string'); });","        pm.test('Response has href attribute', function() { pm.expect(instance[\"href\"]).to.be.a('string'); });","        pm.test('Response has id attribute', function() { pm.expect(instance[\"id\"]).to.be.a('string'); });","        pm.test('Response has name attribute', function() { pm.expect(instance[\"name\"]).to.be.a('string'); });","      ","        pm.test('Body includes value held on name', function () {","            pm.expect(pm.response.text()).to.include(instance['name']);","        });","        pm.test('Body includes value held on href', function () {","            pm.expect(pm.response.text()).to.include(instance['href']);","        });","        pm.test('Body includes value held on id', function () {","            pm.expect(pm.response.text()).to.include(instance['id']);","        });","        pm.test('Body includes value held on name', function () {","            pm.expect(pm.response.text()).to.include(instance['name']);","        });","        // Individualized tests","        if (instance.id == pm.globals.get(\"IDPR01\")) {","            pm.test('href is ' + pm.globals.get(\"HREFPR01\"), function() {pm.expect(instance['href']) == pm.globals.get('HREFPR01');});","            pm.test('id is ' + pm.globals.get(\"IDPR01\"), function() {pm.expect(instance['id']) == pm.globals.get('IDPR01');});","            pm.test('name is ' + pm.globals.get(\"NAMEPR01\"), function() {pm.expect(instance['name']) == pm.globals.get('NAMEPR01');});","        }","        if (instance.id == pm.globals.get(\"IDPR02\")) {","            pm.test('href is ' + pm.globals.get(\"HREFPR02\"), function() {pm.expect(instance['href']) == pm.globals.get('HREFPR02');});","            pm.test('id is ' + pm.globals.get(\"IDPR02\"), function() {pm.expect(instance['id']) == pm.globals.get('IDPR02');});","            pm.test('name is ' + pm.globals.get(\"NAMEPR02\"), function() {pm.expect(instance['name']) == pm.globals.get('NAMEPR02');});","        }  ","    });","  }","  else {","    var instance = pm.response.json();","    var requiredAttributes = ['name', 'href', 'id'];","      ","        pm.test('Instance has all mandatory attributes', function () { pm.expect(Object.keys(instance)).to.include.members(requiredAttributes) });","      ","      ","      ","        pm.test('Response has name attribute', function() { pm.expect(instance[\"name\"]).to.be.a('string'); });","        pm.test('Response has href attribute', function() { pm.expect(instance[\"href\"]).to.be.a('string'); });","        pm.test('Response has id attribute', function() { pm.expect(instance[\"id\"]).to.be.a('string'); });","        pm.test('Response has name attribute', function() { pm.expect(instance[\"name\"]).to.be.a('string'); });","      ","        pm.test('Body includes value held on name', function () {","            pm.expect(pm.response.text()).to.include(instance['name']);","        });","        pm.test('Body includes value held on href', function () {","            pm.expect(pm.response.text()).to.include(instance['href']);","        });","        pm.test('Body includes value held on id', function () {","            pm.expect(pm.response.text()).to.include(instance['id']);","        });","        pm.test('Body includes value held on name', function () {","            pm.expect(pm.response.text()).to.include(instance['name']);","        });","        // Individualized tests","        if (instance.id == pm.globals.get(\"IDPR01\")) {","            pm.test('href is ' + pm.globals.get(\"HREFPR01\"), function() {pm.expect(instance['href']) == pm.globals.get('HREFPR01');});","            pm.test('id is ' + pm.globals.get(\"IDPR01\"), function() {pm.expect(instance['id']) == pm.globals.get('IDPR01');});","            pm.test('name is ' + pm.globals.get(\"NAMEPR01\"), function() {pm.expect(instance['name']) == pm.globals.get('NAMEPR01');});","        }","        if (instance.id == pm.globals.get(\"IDPR02\")) {","            pm.test('href is ' + pm.globals.get(\"HREFPR02\"), function() {pm.expect(instance['href']) == pm.globals.get('HREFPR02');});","            pm.test('id is ' + pm.globals.get(\"IDPR02\"), function() {pm.expect(instance['id']) == pm.globals.get('IDPR02');});","            pm.test('name is ' + pm.globals.get(\"NAMEPR02\"), function() {pm.expect(instance['name']) == pm.globals.get('NAMEPR02');});","        }","   ","  }","  ","  "],"type":"text/javascript"}}],"request":{"method":"GET","header":[{"key":"Accept","value":"application/json"},{"key":"Content-Type","value":"application/json"},{"key":"Auth","value":"LKLKJSDHLKJH"}],"url":{"raw":"{{Party_Role}}partyRole","host":["{{Party_Role}}partyRole"]},"description":"This operation search for the created PartyRole"},"response":[]}]},{"name":"Notification","item":[{"name":"/hub","event":[{"listen":"test","script":{"exec":["var jsonData = pm.response.json();\r","\r","if (Array.isArray(jsonData)) { \r","    pm.test('Array not expected as response', function (){pm.expect.fail()});\r","}\r","\r","pm.test(\"Status code is 201\", function () {\r","  pm.response.to.have.status(201);\r","});\r","\r","var instance = pm.response.json();\r","var requiredAttributes = ['callback', 'id'];\r","\r","pm.test('Instance has all mandatory attributes', function () { pm.expect(Object.keys(instance)).to.include.members(requiredAttributes) });\r","\r","pm.test('Response has callback attribute', function() { pm.expect(instance[\"callback\"]).to.be.a('string'); });\r","pm.test('Response has id attribute', function() { pm.expect(instance[\"id\"]).to.be.a('string'); });\r","\r","pm.globals.set('IDPR01', instance['id']);\r","pm.globals.set('CALLBACKPR01', instance['callback']);\r","\r","pm.test('Body includes value held on id', function () {\r","  pm.expect(pm.response.text()).to.include(instance['id']);\r","});\r","pm.test('Body includes value held on callback', function () {\r","  pm.expect(pm.response.text()).to.include(instance['callback']);\r","});"],"type":"text/javascript"}}],"request":{"method":"POST","header":[{"key":"Accept","value":"application/json"},{"key":"Content-Type","value":"application/json"},{"key":"Auth","value":"LKLKJSDHLKJH"}],"body":{"mode":"raw","raw":"{\r\n  \"callback\": \"https://api.vodafone.com/partyRoleEvent\",\r\n  \"query\": \"\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{Party_Role}}hub","host":["{{Party_Role}}hub"]}},"response":[]}]}]}